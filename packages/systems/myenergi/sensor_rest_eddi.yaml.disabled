sensor:
  - platform: rest
    name: eddi
    resource: !secret myenergi_url_eddi
    scan_interval: 65
    timeout: 60
    authentication: digest
    username: !secret myenergi_serial
    password: !secret myenergi_password
    headers:
      User-Agent: Home Assistant
      Content-Type: application/json
      Accept: application/json
    value_template:  "{% if value_json.eddi[0].dat == unavailable %}off{% else %}on{% endif %}"
    json_attributes_path: '$.eddi[0]'
    json_attributes:
      - bsm       # Boost Mode (1 = Boosting)
#      - bst      # Boost from time ?
      - che       # Charge Added kWh
      - cmt       # Last command success - counts down 1 - 10 when command sent, then 254 - success, 253 - failure, 255 - never received any comamnds
      - dat       # Date (UTC)
      - div       # Diversion Amount (W)
#      - dst       # Daylight Savings Enabled
#      - ectp1     # CT Value (same as div)
#      - ectt1     # CT Name
#      - ectt2     # CT Name
#      - ectt3     # CT Name
#      - frq       # Grid Frequency
      - fwv       # Firmware Version
#      - gen       # Generated Watts
#      - grd       # Watts from grid (-ve if exporting)
#      - hno       # Currently Active Heater
#      - ht1       # Heater 1 name
#      - ht2       # Heater 2 name
#      - pha       # Phases
#      - pri       # Priority
#      - rbc       # ?
#      - rbt       # Remaining Boost Time
#      - sno       # Serial No
      - sta       # Status (1:Paused, 2: ????, 3:Diverting, 4:Boost, 5:Temp Reached, 6:Stopped)
      - tim       # Time (UTC)
      - tp1       # Temperature Probe 1
#      - tp2       # Temperature Probe 2      
      - vol       # voltage out # 2339 ? divide by 10 ?
#      - r1a       # never seen this ? 1?
#      - r2a       # never seen this ? 1?      
#      - r2b       # never seen this ? 1?      
      
      # Attributes do not appear if value is zero !

     